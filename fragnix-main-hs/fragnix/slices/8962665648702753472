{"sliceID":8962665648702753472,"uses":[{"reference":{"builtinModule":"System.Posix.Types"},"usedName":{"constructorName":{"identifier":"Fd"},"constructorTypeName":{"identifier":"Fd"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"valueName":{"identifier":"throwErrnoIfMinus1"}},"qualification":null},{"reference":{"builtinModule":"System.Posix.Internals"},"usedName":{"valueName":{"identifier":"c_fcntl_read"}},"qualification":"Base"},{"reference":{"builtinModule":"Data.Bits"},"usedName":{"valueName":{"operator":".|."}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"otherwise"}},"qualification":null},{"reference":{"builtinModule":"Data.Bits"},"usedName":{"valueName":{"operator":".&."}},"qualification":null},{"reference":{"builtinModule":"Data.Bits"},"usedName":{"valueName":{"identifier":"complement"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"valueName":{"identifier":"throwErrnoIfMinus1_"}},"qualification":null},{"reference":{"builtinModule":"System.Posix.Internals"},"usedName":{"valueName":{"identifier":"c_fcntl_write"}},"qualification":"Base"},{"reference":{"builtinModule":"GHC.Real"},"usedName":{"valueName":{"identifier":"fromIntegral"}},"qualification":null},{"reference":{"otherSlice":553434400528625285},"usedName":{"constructorName":{"identifier":"CloseOnExec"},"constructorTypeName":{"identifier":"FdOption"}},"qualification":null},{"reference":{"otherSlice":9148151180693001539},"usedName":{"valueName":{"identifier":"fdOption2Int"}},"qualification":null},{"reference":{"builtinModule":"System.Posix.Types"},"usedName":{"typeName":{"identifier":"Fd"}},"qualification":null},{"reference":{"otherSlice":553434400528625285},"usedName":{"typeName":{"identifier":"FdOption"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Bool"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null}],"fragment":["setFdOption :: Fd -> FdOption -> Bool -> IO ()","setFdOption (Fd fd) opt val\n  = do r <- throwErrnoIfMinus1 \"setFdOption\"\n              (Base.c_fcntl_read fd getflag)\n       let r'\n             | val = r .|. opt_val\n             | otherwise = r .&. (complement opt_val)\n       throwErrnoIfMinus1_ \"setFdOption\"\n         (Base.c_fcntl_write fd setflag (fromIntegral r'))\n  where (getflag, setflag)\n          = case opt of\n                CloseOnExec -> ((1), (2))\n                _ -> ((3), (4))\n        opt_val = fdOption2Int opt"],"instances":[],"language":{"extensions":["CApiFFI","NondecreasingIndentation","RecordWildCards","MultiParamTypeClasses","ExplicitForAll","PatternGuards"],"isInstance":false}}
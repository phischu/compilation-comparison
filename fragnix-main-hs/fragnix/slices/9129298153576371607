{"sliceID":9129298153576371607,"uses":[{"reference":{"otherSlice":5423682625687415273},"usedName":{"constructorName":{"identifier":"RequestLoggerSettings"},"constructorTypeName":{"identifier":"RequestLoggerSettings"}},"qualification":null},{"reference":{"otherSlice":5423682625687415273},"usedName":{"valueName":{"identifier":"autoFlush"}},"qualification":null},{"reference":{"otherSlice":5423682625687415273},"usedName":{"valueName":{"identifier":"destination"}},"qualification":null},{"reference":{"otherSlice":5423682625687415273},"usedName":{"valueName":{"identifier":"outputFormat"}},"qualification":null},{"reference":{"otherSlice":5884481196479770750},"usedName":{"constructorName":{"identifier":"Handle"},"constructorTypeName":{"identifier":"Destination"}},"qualification":null},{"reference":{"otherSlice":3438500304302744859},"usedName":{"valueName":{"identifier":"hPutStr"}},"qualification":"BS"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"."}},"qualification":null},{"reference":{"otherSlice":8495095337477030331},"usedName":{"valueName":{"identifier":"logToByteString"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":5884481196479770750},"usedName":{"constructorName":{"identifier":"Logger"},"constructorTypeName":{"identifier":"Destination"}},"qualification":null},{"reference":{"otherSlice":695842863739866874},"usedName":{"valueName":{"identifier":"pushLogStr"}},"qualification":null},{"reference":{"otherSlice":5689007428061136122},"usedName":{"valueName":{"identifier":"flushLogStr"}},"qualification":null},{"reference":{"otherSlice":5884481196479770750},"usedName":{"constructorName":{"identifier":"Callback"},"constructorTypeName":{"identifier":"Destination"}},"qualification":null},{"reference":{"otherSlice":194635874759325584},"usedName":{"constructorName":{"identifier":"Apache"},"constructorTypeName":{"identifier":"OutputFormat"}},"qualification":null},{"reference":{"otherSlice":9217673812152573778},"usedName":{"valueName":{"identifier":"getDateGetter"}},"qualification":null},{"reference":{"otherSlice":2342767163056760776},"usedName":{"valueName":{"identifier":"initLogger"}},"qualification":null},{"reference":{"otherSlice":7277447524438301297},"usedName":{"constructorName":{"identifier":"LogCallback"},"constructorTypeName":{"identifier":"LogType"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":5386893384558084949},"usedName":{"valueName":{"identifier":"apacheMiddleware"}},"qualification":null},{"reference":{"otherSlice":194635874759325584},"usedName":{"constructorName":{"identifier":"Detailed"},"constructorTypeName":{"identifier":"OutputFormat"}},"qualification":null},{"reference":{"otherSlice":5158363288683003811},"usedName":{"valueName":{"identifier":"detailedMiddleware"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":">>"}},"qualification":null},{"reference":{"otherSlice":194635874759325584},"usedName":{"constructorName":{"identifier":"CustomOutputFormat"},"constructorTypeName":{"identifier":"OutputFormat"}},"qualification":null},{"reference":{"otherSlice":8818445407456911227},"usedName":{"valueName":{"identifier":"customMiddleware"}},"qualification":null},{"reference":{"otherSlice":5423682625687415273},"usedName":{"typeName":{"identifier":"RequestLoggerSettings"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":3389037324188664509},"usedName":{"typeName":{"identifier":"Middleware"}},"qualification":null}],"fragment":["mkRequestLogger :: RequestLoggerSettings -> IO Middleware","mkRequestLogger RequestLoggerSettings{..}\n  = do let (callback, flusher)\n             = case destination of\n                   Handle h -> (BS.hPutStr h . logToByteString, return ())\n                   Logger l -> (pushLogStr l, flushLogStr l)\n                   Callback c -> (c, return ())\n       case outputFormat of\n           Apache ipsrc -> do getdate <- getDateGetter flusher\n                              apache <- initLogger ipsrc (LogCallback callback (return ()))\n                                          getdate\n                              return $ apacheMiddleware apache\n           Detailed useColors -> detailedMiddleware\n                                   (\\ str -> callback str >> flusher)\n                                   useColors\n           CustomOutputFormat formatter -> do getdate <- getDateGetter flusher\n                                              return $ customMiddleware callback getdate formatter"],"instances":[],"language":{"extensions":["OverloadedStrings","RecordWildCards","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
{"sliceID":3153051515814504108,"uses":[{"reference":{"builtinModule":"Foreign.Marshal.Alloc"},"usedName":{"valueName":{"identifier":"allocaBytes"}},"qualification":null},{"reference":{"builtinModule":"GHC.Num"},"usedName":{"valueName":{"operator":"*"}},"qualification":null},{"reference":{"builtinModule":"Foreign.Storable"},"usedName":{"valueName":{"identifier":"sizeOf"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Types"},"usedName":{"typeName":{"identifier":"CInt"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":1979573450817400516},"usedName":{"valueName":{"identifier":"packSocketTypeOrThrow"}},"qualification":null},{"reference":{"otherSlice":8683971251340889401},"usedName":{"valueName":{"identifier":"throwSocketErrorIfMinus1Retry"}},"qualification":null},{"reference":{"otherSlice":3984739401982927817},"usedName":{"valueName":{"identifier":"c_socketpair"}},"qualification":null},{"reference":{"otherSlice":4346277756103674310},"usedName":{"valueName":{"identifier":"packFamily"}},"qualification":null},{"reference":{"builtinModule":"Foreign.Marshal.Array"},"usedName":{"valueName":{"identifier":"peekArray"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":5297435968204176089},"usedName":{"valueName":{"identifier":"setNonBlockIfNeeded"}},"qualification":null},{"reference":{"builtinModule":"GHC.MVar"},"usedName":{"valueName":{"identifier":"newMVar"}},"qualification":null},{"reference":{"otherSlice":1501835090509313249},"usedName":{"constructorName":{"identifier":"Connected"},"constructorTypeName":{"identifier":"SocketStatus"}},"qualification":null},{"reference":{"otherSlice":3934872489478287384},"usedName":{"constructorName":{"identifier":"MkSocket"},"constructorTypeName":{"identifier":"Socket"}},"qualification":null},{"reference":{"otherSlice":4486329222352366024},"usedName":{"typeName":{"identifier":"Family"}},"qualification":null},{"reference":{"otherSlice":3163448590057951563},"usedName":{"typeName":{"identifier":"SocketType"}},"qualification":null},{"reference":{"otherSlice":6575464258685183223},"usedName":{"typeName":{"identifier":"ProtocolNumber"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":3934872489478287384},"usedName":{"typeName":{"identifier":"Socket"}},"qualification":null}],"fragment":["socketPair ::\n           Family -> SocketType -> ProtocolNumber -> IO (Socket, Socket)","socketPair family stype protocol\n  = do allocaBytes (2 * sizeOf (1 :: CInt)) $\n         \\ fdArr ->\n           do c_stype <- packSocketTypeOrThrow \"socketPair\" stype\n              _rc <- throwSocketErrorIfMinus1Retry \"socketpair\" $\n                       c_socketpair (packFamily family) c_stype protocol fdArr\n              [fd1, fd2] <- peekArray 2 fdArr\n              s1 <- mkNonBlockingSocket fd1\n              s2 <- mkNonBlockingSocket fd2\n              return (s1, s2)\n  where mkNonBlockingSocket fd\n          = do setNonBlockIfNeeded fd\n               stat <- newMVar Connected\n               return (MkSocket fd family stype protocol stat)"],"instances":[],"language":{"extensions":["DeriveDataTypeable","ForeignFunctionInterface","TypeSynonymInstances","ScopedTypeVariables","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
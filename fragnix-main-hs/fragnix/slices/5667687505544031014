{"sliceID":5667687505544031014,"uses":[{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"constructorName":{"identifier":"Request"},"constructorTypeName":{"identifier":"Request"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestMethod"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"httpVersion"}},"qualification":null},{"reference":{"otherSlice":2944056990905657138},"usedName":{"valueName":{"identifier":"http2ver"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"rawPathInfo"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"pathInfo"}},"qualification":null},{"reference":{"otherSlice":5901584132879337842},"usedName":{"valueName":{"identifier":"decodePathSegments"}},"qualification":"H"},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"rawQueryString"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"queryString"}},"qualification":null},{"reference":{"otherSlice":9016668032843075385},"usedName":{"valueName":{"identifier":"parseQuery"}},"qualification":"H"},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaders"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"isSecure"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"constructorName":{"identifier":"True"},"constructorTypeName":{"identifier":"Bool"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"remoteHost"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestBody"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"vault"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestBodyLength"}},"qualification":null},{"reference":{"builtinModule":"Data.Maybe"},"usedName":{"valueName":{"identifier":"maybe"}},"qualification":null},{"reference":{"otherSlice":3677598914068400535},"usedName":{"constructorName":{"identifier":"ChunkedBody"},"constructorTypeName":{"identifier":"RequestBodyLength"}},"qualification":null},{"reference":{"otherSlice":3677598914068400535},"usedName":{"constructorName":{"identifier":"KnownLength"},"constructorTypeName":{"identifier":"RequestBodyLength"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"."}},"qualification":null},{"reference":{"builtinModule":"GHC.Real"},"usedName":{"valueName":{"identifier":"fromIntegral"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaderHost"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"<|>"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaderRange"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaderReferer"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaderUserAgent"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"map"}},"qualification":null},{"reference":{"builtinModule":"Control.Arrow"},"usedName":{"valueName":{"identifier":"first"}},"qualification":null},{"reference":{"otherSlice":6148195690305084502},"usedName":{"valueName":{"identifier":"tokenKey"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Just"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Nothing"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":1430370324296942678},"usedName":{"valueName":{"identifier":"tokenHost"}},"qualification":null},{"reference":{"otherSlice":6900724541411838377},"usedName":{"valueName":{"identifier":"getHeaderValue"}},"qualification":null},{"reference":{"otherSlice":5316150572408627765},"usedName":{"valueName":{"identifier":"tokenPath"}},"qualification":null},{"reference":{"builtinModule":"Data.Maybe"},"usedName":{"valueName":{"identifier":"fromJust"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":5726805446657057537},"usedName":{"valueName":{"identifier":"tokenMethod"}},"qualification":null},{"reference":{"otherSlice":5688761408741024914},"usedName":{"valueName":{"identifier":"tokenAuthority"}},"qualification":null},{"reference":{"otherSlice":516364622348830437},"usedName":{"valueName":{"identifier":"tokenRange"}},"qualification":null},{"reference":{"otherSlice":5999936890939401300},"usedName":{"valueName":{"identifier":"tokenReferer"}},"qualification":null},{"reference":{"otherSlice":8080867876215148949},"usedName":{"valueName":{"identifier":"tokenUserAgent"}},"qualification":null},{"reference":{"otherSlice":981362415910470556},"usedName":{"valueName":{"identifier":"break"}},"qualification":"B8"},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"=="}},"qualification":null},{"reference":{"otherSlice":4733568415032666100},"usedName":{"valueName":{"identifier":"extractPath"}},"qualification":"H"},{"reference":{"otherSlice":135941937043906956},"usedName":{"valueName":{"identifier":"settingsNoParsePath"}},"qualification":"S"},{"reference":{"otherSlice":7100251321886561720},"usedName":{"valueName":{"identifier":"hashByteString"}},"qualification":null},{"reference":{"otherSlice":3763445562474557767},"usedName":{"valueName":{"identifier":"toInternalInfo"}},"qualification":null},{"reference":{"otherSlice":8144835655087874660},"usedName":{"valueName":{"identifier":"threadHandle"}},"qualification":null},{"reference":{"otherSlice":1023373960850482543},"usedName":{"valueName":{"identifier":"insert"}},"qualification":"Vault"},{"reference":{"otherSlice":3286198326056462912},"usedName":{"valueName":{"identifier":"pauseTimeoutKey"}},"qualification":null},{"reference":{"otherSlice":2025821085572104481},"usedName":{"valueName":{"identifier":"pause"}},"qualification":"Timeout"},{"reference":{"otherSlice":5480165024237640999},"usedName":{"valueName":{"identifier":"getFileInfoKey"}},"qualification":null},{"reference":{"otherSlice":8144835655087874660},"usedName":{"valueName":{"identifier":"getFileInfo"}},"qualification":null},{"reference":{"otherSlice":4040998505454653723},"usedName":{"valueName":{"identifier":"getHTTP2DataKey"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"readIORef"}},"qualification":null},{"reference":{"otherSlice":5063993189217102296},"usedName":{"valueName":{"identifier":"setHTTP2DataKey"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"writeIORef"}},"qualification":null},{"reference":{"otherSlice":8473854582944007696},"usedName":{"valueName":{"identifier":"modifyHTTP2DataKey"}},"qualification":null},{"reference":{"builtinModule":"Data.IORef"},"usedName":{"valueName":{"identifier":"modifyIORef'"}},"qualification":null},{"reference":{"otherSlice":1411214489630991239},"usedName":{"valueName":{"identifier":"empty"}},"qualification":"Vault"},{"reference":{"otherSlice":1842857625022371370},"usedName":{"typeName":{"identifier":"InternalInfo1"}},"qualification":null},{"reference":{"otherSlice":135941937043906956},"usedName":{"typeName":{"identifier":"Settings"}},"qualification":"S"},{"reference":{"otherSlice":3812070640366845611},"usedName":{"typeName":{"identifier":"SockAddr"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"typeName":{"identifier":"IORef"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"typeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":1125335483618056843},"usedName":{"typeName":{"identifier":"HTTP2Data"}},"qualification":null},{"reference":{"otherSlice":8542872695666035917},"usedName":{"typeName":{"identifier":"MkReq"}},"qualification":null}],"fragment":["mkRequest' ::\n           InternalInfo1 ->\n             S.Settings -> SockAddr -> IORef (Maybe HTTP2Data) -> MkReq","mkRequest' ii1 settings addr ref (reqths, reqvt) (bodylen, body)\n  = return (req, ii)\n  where !req\n          = Request{requestMethod = colonMethod, httpVersion = http2ver,\n                    rawPathInfo = rawPath, pathInfo = H.decodePathSegments path,\n                    rawQueryString = query, queryString = H.parseQuery query,\n                    requestHeaders = headers, isSecure = True, remoteHost = addr,\n                    requestBody = body, vault = vaultValue,\n                    requestBodyLength =\n                      maybe ChunkedBody (KnownLength . fromIntegral) bodylen,\n                    requestHeaderHost = mHost <|> mAuth, requestHeaderRange = mRange,\n                    requestHeaderReferer = mReferer,\n                    requestHeaderUserAgent = mUserAgent}\n        headers = map (first tokenKey) ths\n          where ths\n                  = case mHost of\n                        Just _ -> reqths\n                        Nothing -> case mAuth of\n                                       Just auth -> (tokenHost, auth) : reqths\n                                       _ -> reqths\n        !mPath = getHeaderValue tokenPath reqvt\n        !colonMethod = fromJust $ getHeaderValue tokenMethod reqvt\n        !mAuth = getHeaderValue tokenAuthority reqvt\n        !mHost = getHeaderValue tokenHost reqvt\n        !mRange = getHeaderValue tokenRange reqvt\n        !mReferer = getHeaderValue tokenReferer reqvt\n        !mUserAgent = getHeaderValue tokenUserAgent reqvt\n        (unparsedPath, query)\n          = B8.break (== '?') $ fromJust (mPath <|> mAuth)\n        !path = H.extractPath unparsedPath\n        !rawPath\n          = if S.settingsNoParsePath settings then unparsedPath else path\n        !h = hashByteString rawPath\n        !ii = toInternalInfo ii1 h\n        !th = threadHandle ii\n        !vaultValue\n          = Vault.insert pauseTimeoutKey (Timeout.pause th) $\n              Vault.insert getFileInfoKey (getFileInfo ii) $\n                Vault.insert getHTTP2DataKey (readIORef ref) $\n                  Vault.insert setHTTP2DataKey (writeIORef ref) $\n                    Vault.insert modifyHTTP2DataKey (modifyIORef' ref) Vault.empty"],"instances":[],"language":{"extensions":["OverloadedStrings","BangPatterns","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
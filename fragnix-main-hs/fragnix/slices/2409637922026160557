{"sliceID":2409637922026160557,"uses":[{"reference":{"otherSlice":6766449275992946084},"usedName":{"constructorName":{"identifier":"Builder"},"constructorTypeName":{"identifier":"Builder"}},"qualification":null},{"reference":{"otherSlice":2931540031717686030},"usedName":{"valueName":{"identifier":"buildStep"}},"qualification":null},{"reference":{"otherSlice":2921932848836490295},"usedName":{"constructorName":{"identifier":"BufRange"},"constructorTypeName":{"identifier":"BufRange"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":3030113937244366044},"usedName":{"constructorName":{"identifier":"Done"},"constructorTypeName":{"identifier":"BuildSignal"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"valueName":{"identifier":"plusPtr"}},"qualification":null},{"reference":{"otherSlice":7605495112822771118},"usedName":{"valueName":{"identifier":"toBS"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"valueName":{"identifier":"minusPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":">>="}},"qualification":null},{"reference":{"otherSlice":3030113937244366044},"usedName":{"valueName":{"identifier":"runBuildStep"}},"qualification":null},{"reference":{"otherSlice":3030113937244366044},"usedName":{"constructorName":{"identifier":"BufferFull"},"constructorTypeName":{"identifier":"BuildSignal"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"<"}},"qualification":null},{"reference":{"builtinModule":"GHC.Err"},"usedName":{"valueName":{"identifier":"error"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"otherwise"}},"qualification":null},{"reference":{"otherSlice":3030113937244366044},"usedName":{"constructorName":{"identifier":"InsertByteString"},"constructorTypeName":{"identifier":"BuildSignal"}},"qualification":null},{"reference":{"otherSlice":8378938508867662169},"usedName":{"typeName":{"identifier":"Buffer"}},"qualification":null},{"reference":{"otherSlice":7938598831398463423},"usedName":{"typeName":{"identifier":"BufSize"}},"qualification":null},{"reference":{"otherSlice":8642306666063513779},"usedName":{"typeName":{"identifier":"ByteString"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":6766449275992946084},"usedName":{"typeName":{"identifier":"Builder"}},"qualification":null}],"fragment":["toBufIOWith ::\n            Buffer -> BufSize -> (ByteString -> IO ()) -> Builder -> IO ()","toBufIOWith buf !size io (Builder build) = loop firstStep\n  where firstStep = build (buildStep finalStep)\n        finalStep (BufRange p _) = return $ Done p ()\n        bufRange = BufRange buf (buf `plusPtr` size)\n        runIO ptr = toBS buf (ptr `minusPtr` buf) >>= io\n        loop step\n          = do signal <- runBuildStep step bufRange\n               case signal of\n                   Done ptr _ -> runIO ptr\n                   BufferFull minSize ptr next | size < minSize ->\n                                                 error \"toBufIOWith: BufferFull: minSize\"\n                                               | otherwise ->\n                                                 do runIO ptr\n                                                    loop next\n                   InsertByteString ptr bs next -> do runIO ptr\n                                                      io bs\n                                                      loop next"],"instances":[],"language":{"extensions":["BangPatterns","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
{"sliceID":2810477755019206986,"uses":[{"reference":{"otherSlice":3086651893912105973},"usedName":{"constructorName":{"identifier":"Connection"},"constructorTypeName":{"identifier":"Connection"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connWriteBuffer"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connBufferSize"}},"qualification":null},{"reference":{"otherSlice":8144835655087874660},"usedName":{"valueName":{"identifier":"getFd"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Nothing"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":5021289095061614116},"usedName":{"valueName":{"identifier":"openFile"}},"qualification":null},{"reference":{"otherSlice":9090970273167949948},"usedName":{"valueName":{"identifier":"register"}},"qualification":"T"},{"reference":{"otherSlice":8144835655087874660},"usedName":{"valueName":{"identifier":"timeoutManager"}},"qualification":null},{"reference":{"otherSlice":5592885989741275657},"usedName":{"valueName":{"identifier":"closeFile"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":4684457803165284207},"usedName":{"valueName":{"identifier":"tickle"}},"qualification":"T"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Just"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"valueName":{"identifier":"plusPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"identifier":"min"}},"qualification":null},{"reference":{"builtinModule":"GHC.Num"},"usedName":{"valueName":{"operator":"-"}},"qualification":null},{"reference":{"otherSlice":3714665945080314234},"usedName":{"valueName":{"identifier":"fileStartEnd"}},"qualification":null},{"reference":{"otherSlice":5856222785976263450},"usedName":{"valueName":{"identifier":"positionRead"}},"qualification":null},{"reference":{"otherSlice":3127597496683865424},"usedName":{"valueName":{"identifier":"mini"}},"qualification":null},{"reference":{"builtinModule":"GHC.Real"},"usedName":{"valueName":{"identifier":"fromIntegral"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":441749652001021794},"usedName":{"valueName":{"identifier":"nextForFile"}},"qualification":null},{"reference":{"builtinModule":"GHC.Num"},"usedName":{"valueName":{"operator":"+"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"typeName":{"identifier":"Connection"}},"qualification":null},{"reference":{"otherSlice":8144835655087874660},"usedName":{"typeName":{"identifier":"InternalInfo"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Int"}},"qualification":null},{"reference":{"otherSlice":8828389717820057018},"usedName":{"typeName":{"identifier":"WindowSize"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO"},"usedName":{"typeName":{"identifier":"FilePath"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"typeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":8174925800893531719},"usedName":{"typeName":{"identifier":"FilePart"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":6632841070279347397},"usedName":{"typeName":{"identifier":"Next"}},"qualification":null}],"fragment":["fillFileBodyGetNext ::\n                    Connection ->\n                      InternalInfo ->\n                        Int -> WindowSize -> FilePath -> Maybe FilePart -> IO Next","fillFileBodyGetNext Connection{connWriteBuffer, connBufferSize} ii\n  off lim path mpart\n  = do (mfd, refresh') <- getFd ii path\n       (fd, refresh) <- case mfd of\n                            Nothing -> do fd' <- openFile path\n                                          th <- T.register (timeoutManager ii) (closeFile fd')\n                                          return (fd', T.tickle th)\n                            Just fd -> return (fd, refresh')\n       let datBuf = connWriteBuffer `plusPtr` off\n           room = min (connBufferSize - off) lim\n       (start, bytes) <- fileStartEnd path mpart\n       len <- positionRead fd datBuf (mini room bytes) start\n       refresh\n       let len' = fromIntegral len\n       return $ nextForFile len fd (start + len') (bytes - len') refresh"],"instances":[],"language":{"extensions":["OverloadedStrings","BangPatterns","NamedFieldPuns","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
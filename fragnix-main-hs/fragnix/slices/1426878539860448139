{"sliceID":1426878539860448139,"uses":[{"reference":{"otherSlice":2517442829431091145},"usedName":{"typeName":{"identifier":"DirStream"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":3315285567132956649},"usedName":{"typeName":{"identifier":"RawFilePath"}},"qualification":null},{"reference":{"otherSlice":2517442829431091145},"usedName":{"constructorName":{"identifier":"DirStream"},"constructorTypeName":{"identifier":"DirStream"}},"qualification":null},{"reference":{"builtinModule":"Foreign.Marshal.Alloc"},"usedName":{"valueName":{"identifier":"alloca"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"valueName":{"identifier":"resetErrno"}},"qualification":null},{"reference":{"otherSlice":5733643323592711302},"usedName":{"valueName":{"identifier":"c_readdir"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"=="}},"qualification":null},{"reference":{"builtinModule":"Foreign.Storable"},"usedName":{"valueName":{"identifier":"peek"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"valueName":{"identifier":"nullPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":7459617743278403755},"usedName":{"valueName":{"identifier":"empty"}},"qualification":"BC"},{"reference":{"otherSlice":714028268616669388},"usedName":{"valueName":{"identifier":"d_name"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":">>="}},"qualification":null},{"reference":{"otherSlice":7059088620324521440},"usedName":{"valueName":{"identifier":"peekFilePath"}},"qualification":null},{"reference":{"otherSlice":6808002192161132501},"usedName":{"valueName":{"identifier":"c_freeDirEnt"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"valueName":{"identifier":"getErrno"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"valueName":{"identifier":"eINTR"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"constructorName":{"identifier":"Errno"},"constructorTypeName":{"identifier":"Errno"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"valueName":{"identifier":"throwErrno"}},"qualification":null}],"fragment":["readDirStream :: DirStream -> IO RawFilePath","readDirStream (DirStream dirp)\n  = alloca $ \\ ptr_dEnt -> loop ptr_dEnt\n  where loop ptr_dEnt\n          = do resetErrno\n               r <- c_readdir dirp ptr_dEnt\n               if (r == 0) then\n                 do dEnt <- peek ptr_dEnt\n                    if (dEnt == nullPtr) then return BC.empty else\n                      do entry <- (d_name dEnt >>= peekFilePath)\n                         c_freeDirEnt dEnt\n                         return entry\n                 else\n                 do errno <- getErrno\n                    if (errno == eINTR) then loop ptr_dEnt else\n                      do let (Errno eo) = errno\n                         if (eo == 0) then return BC.empty else throwErrno \"readDirStream\""],"instances":[],"language":{"extensions":["CApiFFI","NondecreasingIndentation","MultiParamTypeClasses","ExplicitForAll","PatternGuards"],"isInstance":false}}
{"sliceID":3477042070737688470,"uses":[{"reference":{"otherSlice":2958303632770465718},"usedName":{"constructorName":{"identifier":"PriorityTree"},"constructorTypeName":{"identifier":"PriorityTree"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"=="}},"qualification":null},{"reference":{"builtinModule":"GHC.Conc.Sync"},"usedName":{"valueName":{"identifier":"atomically"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"otherwise"}},"qualification":null},{"reference":{"builtinModule":"GHC.Conc.Sync"},"usedName":{"valueName":{"identifier":"readTVar"}},"qualification":null},{"reference":{"otherSlice":5954820236739426493},"usedName":{"valueName":{"identifier":"lookup"}},"qualification":"Map"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Nothing"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Just"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":269795606805388831},"usedName":{"valueName":{"identifier":"dependency"}},"qualification":"Q"},{"reference":{"otherSlice":8180488005982604557},"usedName":{"valueName":{"identifier":"delete"}},"qualification":"Q"},{"reference":{"otherSlice":7540965333211353980},"usedName":{"constructorName":{"identifier":"Child"},"constructorTypeName":{"identifier":"Element"}},"qualification":null},{"reference":{"otherSlice":7540965333211353980},"usedName":{"constructorName":{"identifier":"Parent"},"constructorTypeName":{"identifier":"Element"}},"qualification":null},{"reference":{"otherSlice":2958303632770465718},"usedName":{"typeName":{"identifier":"PriorityTree"}},"qualification":null},{"reference":{"otherSlice":3763678114540243998},"usedName":{"typeName":{"identifier":"StreamId"}},"qualification":null},{"reference":{"otherSlice":269795606805388831},"usedName":{"typeName":{"identifier":"Precedence"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"typeName":{"identifier":"Maybe"}},"qualification":null}],"fragment":["delete :: PriorityTree a -> StreamId -> Precedence -> IO (Maybe a)","delete (PriorityTree var q0) sid p\n  | pid == 0 = atomically $ del q0\n  | otherwise =\n    atomically $\n      do m <- readTVar var\n         case Map.lookup pid m of\n             Nothing -> return Nothing\n             Just (q, _) -> del q\n  where pid = Q.dependency p\n        del q\n          = do mel <- Q.delete sid q\n               case mel of\n                   Nothing -> return Nothing\n                   Just el -> case el of\n                                  Child x -> return $ Just x\n                                  Parent _ -> return Nothing"],"instances":[],"language":{"extensions":["BangPatterns","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
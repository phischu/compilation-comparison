{"sliceID":7971284202875098136,"uses":[{"reference":{"otherSlice":745317720056689458},"usedName":{"valueName":{"identifier":"builder"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":592477549928462751},"usedName":{"valueName":{"identifier":"sizeBound"}},"qualification":"I"},{"reference":{"otherSlice":8642306666063513779},"usedName":{"constructorName":{"identifier":"PS"},"constructorTypeName":{"identifier":"ByteString"}},"qualification":"S"},{"reference":{"builtinModule":"GHC.ForeignPtr"},"usedName":{"valueName":{"identifier":"unsafeForeignPtrToPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"valueName":{"identifier":"plusPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Num"},"usedName":{"valueName":{"operator":"+"}},"qualification":null},{"reference":{"otherSlice":3038462019849922282},"usedName":{"constructorName":{"identifier":"BufferRange"},"constructorTypeName":{"identifier":"BufferRange"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":">="}},"qualification":null},{"reference":{"builtinModule":"GHC.ForeignPtr"},"usedName":{"valueName":{"identifier":"touchForeignPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"<"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"identifier":"min"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"otherwise"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":2309006110701472119},"usedName":{"valueName":{"identifier":"bufferFull"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"valueName":{"identifier":"minusPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Real"},"usedName":{"valueName":{"identifier":"div"}},"qualification":null},{"reference":{"builtinModule":"Foreign.Storable"},"usedName":{"valueName":{"identifier":"peek"}},"qualification":null},{"reference":{"otherSlice":6670216626389620141},"usedName":{"valueName":{"identifier":"runB"}},"qualification":null},{"reference":{"otherSlice":2317942471882700773},"usedName":{"typeName":{"identifier":"BoundedPrim"}},"qualification":null},{"reference":{"builtinModule":"GHC.Word"},"usedName":{"typeName":{"identifier":"Word8"}},"qualification":null},{"reference":{"otherSlice":8642306666063513779},"usedName":{"typeName":{"identifier":"ByteString"}},"qualification":"S"},{"reference":{"otherSlice":5953179400377615708},"usedName":{"typeName":{"identifier":"Builder"}},"qualification":null}],"fragment":["primMapByteStringBounded ::\n                         BoundedPrim Word8 -> S.ByteString -> Builder","primMapByteStringBounded w = \\ bs -> builder $ step bs\n  where bound = I.sizeBound w\n        step (S.PS ifp ioff isize) !k\n          = goBS (unsafeForeignPtrToPtr ifp `plusPtr` ioff)\n          where !ipe = unsafeForeignPtrToPtr ifp `plusPtr` (ioff + isize)\n                goBS !ip0 !br@(BufferRange op0 ope)\n                  | ip0 >= ipe =\n                    do touchForeignPtr ifp\n                       k br\n                  | op0 `plusPtr` bound < ope =\n                    goPartial (ip0 `plusPtr` min outRemaining inpRemaining)\n                  | otherwise = return $ bufferFull bound op0 (goBS ip0)\n                  where outRemaining = (ope `minusPtr` op0) `div` bound\n                        inpRemaining = ipe `minusPtr` ip0\n                        goPartial !ipeTmp = go ip0 op0\n                          where go !ip !op\n                                  | ip < ipeTmp =\n                                    do x <- peek ip\n                                       op' <- runB w x op\n                                       go (ip `plusPtr` 1) op'\n                                  | otherwise = goBS ip (BufferRange op ope)"],"instances":[],"language":{"extensions":["BangPatterns","ScopedTypeVariables","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
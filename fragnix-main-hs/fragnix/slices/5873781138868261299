{"sliceID":5873781138868261299,"uses":[{"reference":{"otherSlice":7468473159724944043},"usedName":{"constructorName":{"identifier":"Acquire"},"constructorTypeName":{"identifier":"Acquire"}},"qualification":null},{"reference":{"otherSlice":2071755692096765236},"usedName":{"valueName":{"identifier":"liftIO"}},"qualification":null},{"reference":{"otherSlice":3307501015665414792},"usedName":{"valueName":{"identifier":"getMaskingState"}},"qualification":"E"},{"reference":{"otherSlice":2198017240001515453},"usedName":{"valueName":{"identifier":"mask"}},"qualification":"C"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":13895810223688184},"usedName":{"constructorName":{"identifier":"Allocated"},"constructorTypeName":{"identifier":"Allocated"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO"},"usedName":{"constructorName":{"identifier":"Unmasked"},"constructorTypeName":{"identifier":"MaskingState"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.IO"},"usedName":{"valueName":{"identifier":"unsafeUnmask"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"id"}},"qualification":null},{"reference":{"otherSlice":6076035593432272440},"usedName":{"valueName":{"identifier":"onException"}},"qualification":"C"},{"reference":{"otherSlice":6577957584704791200},"usedName":{"constructorName":{"identifier":"ReleaseException"},"constructorTypeName":{"identifier":"ReleaseType"}},"qualification":null},{"reference":{"otherSlice":6577957584704791200},"usedName":{"constructorName":{"identifier":"ReleaseNormal"},"constructorTypeName":{"identifier":"ReleaseType"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":2198017240001515453},"usedName":{"typeName":{"identifier":"MonadMask"}},"qualification":"C"},{"reference":{"otherSlice":2071755692096765236},"usedName":{"typeName":{"identifier":"MonadIO"}},"qualification":null},{"reference":{"otherSlice":7468473159724944043},"usedName":{"typeName":{"identifier":"Acquire"}},"qualification":null}],"fragment":["withEx ::\n         (C.MonadMask m, MonadIO m) => Acquire a -> (a -> m b) -> m b","withEx (Acquire f) g\n  = do origMS <- liftIO E.getMaskingState\n       C.mask $\n         \\ restore ->\n           do Allocated x free <- liftIO $\n                                    f $\n                                      case origMS of\n                                          E.Unmasked -> unsafeUnmask\n                                          _ -> id\n              res <- restore (g x) `C.onException` liftIO (free ReleaseException)\n              liftIO $ free ReleaseNormal\n              return res"],"instances":[],"language":{"extensions":["RankNTypes","MultiParamTypeClasses","DeriveDataTypeable","FlexibleContexts","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
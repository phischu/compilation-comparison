{"sliceID":2187806408310012761,"uses":[{"reference":{"otherSlice":2319116565441854618},"usedName":{"constructorName":{"identifier":"SRequest"},"constructorTypeName":{"identifier":"SRequest"}},"qualification":null},{"reference":{"otherSlice":7514752667408029687},"usedName":{"valueName":{"identifier":"ask"}},"qualification":null},{"reference":{"otherSlice":2071755692096765236},"usedName":{"valueName":{"identifier":"liftIO"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"newIORef"}},"qualification":null},{"reference":{"otherSlice":9091181793480111601},"usedName":{"valueName":{"identifier":"toChunks"}},"qualification":"L"},{"reference":{"otherSlice":30758760526534613},"usedName":{"valueName":{"identifier":"requestBody"}},"qualification":null},{"reference":{"builtinModule":"Data.IORef"},"usedName":{"valueName":{"identifier":"atomicModifyIORef"}},"qualification":null},{"reference":{"otherSlice":2109377013281436257},"usedName":{"valueName":{"identifier":"empty"}},"qualification":"S"},{"reference":{"builtinModule":"GHC.Err"},"usedName":{"valueName":{"identifier":"error"}},"qualification":null},{"reference":{"otherSlice":303372933562511200},"usedName":{"constructorName":{"identifier":"ResponseReceived"},"constructorTypeName":{"identifier":"ResponseReceived"}},"qualification":null},{"reference":{"otherSlice":6164078285193811307},"usedName":{"valueName":{"identifier":"runResponse"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"readIORef"}},"qualification":null},{"reference":{"otherSlice":2319116565441854618},"usedName":{"typeName":{"identifier":"SRequest"}},"qualification":null},{"reference":{"otherSlice":1857161883750851484},"usedName":{"typeName":{"identifier":"Session"}},"qualification":null},{"reference":{"otherSlice":3770287935488921004},"usedName":{"typeName":{"identifier":"SResponse"}},"qualification":null}],"fragment":["srequest :: SRequest -> Session SResponse","srequest (SRequest req bod)\n  = do app <- ask\n       refChunks <- liftIO $ newIORef $ L.toChunks bod\n       let req'\n             = req{requestBody =\n                     atomicModifyIORef refChunks $\n                       \\ bss ->\n                         case bss of\n                             [] -> ([], S.empty)\n                             x : y -> (y, x)}\n       liftIO $\n         do ref <- newIORef $ error \"runResponse gave no result\"\n            ResponseReceived <- app req' (runResponse ref)\n            readIORef ref"],"instances":[],"language":{"extensions":["OverloadedStrings","DeriveDataTypeable","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
{"sliceID":3557121237480554918,"uses":[{"reference":{"otherSlice":3858339543871837513},"usedName":{"constructorName":{"identifier":"Acquire"},"constructorTypeName":{"identifier":"Acquire"}},"qualification":null},{"reference":{"otherSlice":7686766802920706652},"usedName":{"valueName":{"identifier":"control"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":196398726453624288},"usedName":{"valueName":{"identifier":"mask"}},"qualification":"E"},{"reference":{"otherSlice":3842035766038090352},"usedName":{"constructorName":{"identifier":"Allocated"},"constructorTypeName":{"identifier":"Allocated"}},"qualification":null},{"reference":{"otherSlice":8304199671874216127},"usedName":{"valueName":{"identifier":"onException"}},"qualification":"E"},{"reference":{"otherSlice":220949478536803346},"usedName":{"constructorName":{"identifier":"ReleaseException"},"constructorTypeName":{"identifier":"ReleaseType"}},"qualification":null},{"reference":{"otherSlice":220949478536803346},"usedName":{"constructorName":{"identifier":"ReleaseNormal"},"constructorTypeName":{"identifier":"ReleaseType"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":3089301142827340338},"usedName":{"typeName":{"identifier":"MonadBaseControl"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":3858339543871837513},"usedName":{"typeName":{"identifier":"Acquire"}},"qualification":null}],"fragment":["with :: MonadBaseControl IO m => Acquire a -> (a -> m b) -> m b","with (Acquire f) g\n  = control $\n      \\ run ->\n        E.mask $\n          \\ restore ->\n            do Allocated x free <- f restore\n               res <- restore (run (g x)) `E.onException` free ReleaseException\n               free ReleaseNormal\n               return res"],"instances":[],"language":{"extensions":["RankNTypes","MultiParamTypeClasses","DeriveDataTypeable","FlexibleContexts","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
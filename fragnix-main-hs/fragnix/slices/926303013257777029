{"sliceID":926303013257777029,"uses":[{"reference":{"otherSlice":7327416380633318063},"usedName":{"constructorName":{"identifier":"ServerSettingsUnix"},"constructorTypeName":{"identifier":"ServerSettingsUnix"}},"qualification":null},{"reference":{"builtinModule":"Control.Exception.Base"},"usedName":{"valueName":{"identifier":"bracket"}},"qualification":"E"},{"reference":{"otherSlice":6129407742919032324},"usedName":{"valueName":{"identifier":"bindPath"}},"qualification":null},{"reference":{"otherSlice":1691131710779787624},"usedName":{"valueName":{"identifier":"close"}},"qualification":"NS"},{"reference":{"builtinModule":"Control.Monad"},"usedName":{"valueName":{"identifier":"forever"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"builtinModule":"Control.Exception.Base"},"usedName":{"valueName":{"identifier":"bracketOnError"}},"qualification":"E"},{"reference":{"otherSlice":3472506172977646331},"usedName":{"valueName":{"identifier":"acceptSafe"}},"qualification":null},{"reference":{"otherSlice":1895890229595477002},"usedName":{"constructorName":{"identifier":"AppDataUnix"},"constructorTypeName":{"identifier":"AppDataUnix"}},"qualification":null},{"reference":{"otherSlice":1895890229595477002},"usedName":{"valueName":{"identifier":"appReadUnix"}},"qualification":null},{"reference":{"otherSlice":203831192697062572},"usedName":{"valueName":{"identifier":"safeRecv"}},"qualification":null},{"reference":{"otherSlice":1895890229595477002},"usedName":{"valueName":{"identifier":"appWriteUnix"}},"qualification":null},{"reference":{"otherSlice":8488102157718894721},"usedName":{"valueName":{"identifier":"sendAll"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO"},"usedName":{"valueName":{"identifier":"mask"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Conc.Sync"},"usedName":{"valueName":{"identifier":"forkIO"}},"qualification":null},{"reference":{"builtinModule":"Control.Exception.Base"},"usedName":{"valueName":{"identifier":"finally"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":7327416380633318063},"usedName":{"typeName":{"identifier":"ServerSettingsUnix"}},"qualification":null},{"reference":{"otherSlice":1895890229595477002},"usedName":{"typeName":{"identifier":"AppDataUnix"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null}],"fragment":["runUnixServer ::\n              ServerSettingsUnix -> (AppDataUnix -> IO ()) -> IO a","runUnixServer (ServerSettingsUnix path afterBind readBufferSize)\n  app\n  = E.bracket (bindPath path) NS.close\n      (\\ socket ->\n         do afterBind socket\n            forever $ serve socket)\n  where serve lsocket\n          = E.bracketOnError (acceptSafe lsocket)\n              (\\ (socket, _) -> NS.close socket)\n              $\n              \\ (socket, _) ->\n                do let ad\n                         = AppDataUnix{appReadUnix = safeRecv socket readBufferSize,\n                                       appWriteUnix = sendAll socket}\n                   _ <- E.mask $\n                          \\ restore -> forkIO $ restore (app ad) `E.finally` NS.close socket\n                   return ()"],"instances":[],"language":{"extensions":["ScopedTypeVariables","BangPatterns","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
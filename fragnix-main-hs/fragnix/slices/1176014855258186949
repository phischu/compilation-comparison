{"sliceID":1176014855258186949,"uses":[{"reference":{"builtinModule":"Control.Concurrent.MVar"},"usedName":{"valueName":{"identifier":"modifyMVar_"}},"qualification":null},{"reference":{"otherSlice":7019759337704159228},"usedName":{"valueName":{"identifier":"runInteractiveProcess_delegate_ctlc"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"builtinModule":"Data.Maybe"},"usedName":{"constructorName":{"identifier":"Just"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":6088128176390750205},"usedName":{"valueName":{"identifier":"installHandler"}},"qualification":null},{"reference":{"otherSlice":1574281753883644932},"usedName":{"valueName":{"identifier":"sigINT"}},"qualification":null},{"reference":{"builtinModule":"Data.Maybe"},"usedName":{"constructorName":{"identifier":"Nothing"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":1667748744428247429},"usedName":{"valueName":{"identifier":"sigQUIT"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Num"},"usedName":{"valueName":{"operator":"-"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO.Exception"},"usedName":{"constructorName":{"identifier":"ExitFailure"},"constructorTypeName":{"identifier":"ExitCode"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO"},"usedName":{"valueName":{"identifier":"throwIO"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO.Exception"},"usedName":{"constructorName":{"identifier":"UserInterrupt"},"constructorTypeName":{"identifier":"AsyncException"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"=="}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"||"}},"qualification":null},{"reference":{"builtinModule":"GHC.Real"},"usedName":{"valueName":{"identifier":"fromIntegral"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO.Exception"},"usedName":{"typeName":{"identifier":"ExitCode"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null}],"fragment":["endDelegateControlC :: ExitCode -> IO ()","endDelegateControlC exitCode\n  = do modifyMVar_ runInteractiveProcess_delegate_ctlc $\n         \\ delegating ->\n           do case delegating of\n                  Just (1, old_int, old_quit) -> do _ <- installHandler sigINT\n                                                           old_int\n                                                           Nothing\n                                                    _ <- installHandler sigQUIT old_quit Nothing\n                                                    return Nothing\n                  Just (count, old_int, old_quit) -> do let !count' = count - 1\n                                                        return (Just (count', old_int, old_quit))\n                  Nothing -> return Nothing\n       case exitCode of\n           ExitFailure n | isSigIntQuit n -> throwIO UserInterrupt\n           _ -> return ()\n  where isSigIntQuit n = sig == sigINT || sig == sigQUIT\n          where sig = fromIntegral (-n)"],"instances":[],"language":{"extensions":["RecordWildCards","BangPatterns","InterruptibleFFI","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
{"sliceID":6100327719703493567,"uses":[{"reference":{"otherSlice":1243117115125165659},"usedName":{"valueName":{"identifier":"newFileLoggerSet"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":4643942544947081026},"usedName":{"valueName":{"identifier":"log_file"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"newIORef"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Int"}},"qualification":null},{"reference":{"builtinModule":"GHC.MVar"},"usedName":{"valueName":{"identifier":"newMVar"}},"qualification":null},{"reference":{"otherSlice":7645752608073082028},"usedName":{"valueName":{"identifier":"decrease"}},"qualification":null},{"reference":{"otherSlice":7166398297361245797},"usedName":{"valueName":{"identifier":"apache"}},"qualification":null},{"reference":{"otherSlice":695842863739866874},"usedName":{"valueName":{"identifier":"pushLogStr"}},"qualification":null},{"reference":{"builtinModule":"Control.Monad"},"usedName":{"valueName":{"identifier":"when"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"<="}},"qualification":null},{"reference":{"otherSlice":1642409994275259471},"usedName":{"valueName":{"identifier":"tryRotate"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":4444796745286084219},"usedName":{"valueName":{"identifier":"rmLoggerSet"}},"qualification":null},{"reference":{"otherSlice":3782115418504826121},"usedName":{"constructorName":{"identifier":"ApacheLoggerActions"},"constructorTypeName":{"identifier":"ApacheLoggerActions"}},"qualification":null},{"reference":{"otherSlice":3782115418504826121},"usedName":{"valueName":{"identifier":"apacheLogger"}},"qualification":null},{"reference":{"otherSlice":3782115418504826121},"usedName":{"valueName":{"identifier":"logRotator"}},"qualification":null},{"reference":{"otherSlice":3782115418504826121},"usedName":{"valueName":{"identifier":"logRemover"}},"qualification":null},{"reference":{"otherSlice":1392369650614630952},"usedName":{"typeName":{"identifier":"IPAddrSource"}},"qualification":null},{"reference":{"otherSlice":4643942544947081026},"usedName":{"typeName":{"identifier":"FileLogSpec"}},"qualification":null},{"reference":{"otherSlice":4162018073486088401},"usedName":{"typeName":{"identifier":"BufSize"}},"qualification":null},{"reference":{"otherSlice":675340419119151214},"usedName":{"typeName":{"identifier":"DateCacheGetter"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":3782115418504826121},"usedName":{"typeName":{"identifier":"ApacheLoggerActions"}},"qualification":null}],"fragment":["fileLoggerInit ::\n               IPAddrSource ->\n                 FileLogSpec -> BufSize -> DateCacheGetter -> IO ApacheLoggerActions","fileLoggerInit ipsrc spec size dateget\n  = do lgrset <- newFileLoggerSet size $ log_file spec\n       ref <- newIORef (0 :: Int)\n       mvar <- newMVar ()\n       let logger a b c\n             = do cnt <- decrease ref\n                  apache (pushLogStr lgrset) ipsrc dateget a b c\n                  when (cnt <= 0) $ tryRotate lgrset spec ref mvar\n           noRotator = return ()\n           remover = rmLoggerSet lgrset\n       return\n         ApacheLoggerActions{apacheLogger = logger, logRotator = noRotator,\n                             logRemover = remover}"],"instances":[],"language":{"extensions":["MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
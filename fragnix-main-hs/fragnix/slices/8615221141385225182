{"sliceID":8615221141385225182,"uses":[{"reference":{"otherSlice":4674243622065387603},"usedName":{"valueName":{"identifier":"withSocketsDo"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":6743564503576885292},"usedName":{"valueName":{"identifier":"withCStringIf"}},"qualification":null},{"reference":{"otherSlice":8837161020737982135},"usedName":{"valueName":{"identifier":"withSockAddr"}},"qualification":null},{"reference":{"otherSlice":2300706998961099050},"usedName":{"valueName":{"identifier":"c_getnameinfo"}},"qualification":null},{"reference":{"builtinModule":"GHC.Real"},"usedName":{"valueName":{"identifier":"fromIntegral"}},"qualification":null},{"reference":{"otherSlice":9094638538105268664},"usedName":{"valueName":{"identifier":"packBits"}},"qualification":null},{"reference":{"otherSlice":710745730984632311},"usedName":{"valueName":{"identifier":"niFlagMapping"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"liftM"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Just"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.String"},"usedName":{"valueName":{"identifier":"peekCString"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Nothing"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":8344333531007451373},"usedName":{"valueName":{"identifier":"gai_strerror"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO.Exception"},"usedName":{"valueName":{"identifier":"ioError"}},"qualification":null},{"reference":{"builtinModule":"System.IO.Error"},"usedName":{"valueName":{"identifier":"ioeSetErrorString"}},"qualification":null},{"reference":{"builtinModule":"System.IO.Error"},"usedName":{"valueName":{"identifier":"mkIOError"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO.Exception"},"usedName":{"constructorName":{"identifier":"NoSuchThing"},"constructorTypeName":{"identifier":"IOErrorType"}},"qualification":null},{"reference":{"otherSlice":1104867164218684667},"usedName":{"typeName":{"identifier":"NameInfoFlag"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Bool"}},"qualification":null},{"reference":{"otherSlice":3812070640366845611},"usedName":{"typeName":{"identifier":"SockAddr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"typeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":2265647500502576818},"usedName":{"typeName":{"identifier":"HostName"}},"qualification":null},{"reference":{"otherSlice":6012126910783023571},"usedName":{"typeName":{"identifier":"ServiceName"}},"qualification":null}],"fragment":["getNameInfo ::\n            [NameInfoFlag] ->\n              Bool -> Bool -> SockAddr -> IO (Maybe HostName, Maybe ServiceName)","getNameInfo flags doHost doService addr\n  = withSocketsDo $\n      withCStringIf doHost (1025) $\n        \\ c_hostlen c_host ->\n          withCStringIf doService (32) $\n            \\ c_servlen c_serv ->\n              do withSockAddr addr $\n                   \\ ptr_addr sz ->\n                     do ret <- c_getnameinfo ptr_addr (fromIntegral sz) c_host c_hostlen\n                                 c_serv\n                                 c_servlen\n                                 (packBits niFlagMapping flags)\n                        case ret of\n                            0 -> do let peekIf doIf c_val\n                                          = if doIf then liftM Just $ peekCString c_val else\n                                              return Nothing\n                                    host <- peekIf doHost c_host\n                                    serv <- peekIf doService c_serv\n                                    return (host, serv)\n                            _ -> do err <- gai_strerror ret\n                                    ioError\n                                      (ioeSetErrorString\n                                         (mkIOError NoSuchThing \"Network.Socket.getNameInfo\" Nothing\n                                            Nothing)\n                                         err)"],"instances":[],"language":{"extensions":["DeriveDataTypeable","ForeignFunctionInterface","TypeSynonymInstances","ScopedTypeVariables","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
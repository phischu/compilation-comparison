{"sliceID":2342854277613784696,"uses":[{"reference":{"otherSlice":3611845119764360671},"usedName":{"valueName":{"identifier":"c_recv"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"=="}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"valueName":{"identifier":"getErrno"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"valueName":{"identifier":"eAGAIN"}},"qualification":null},{"reference":{"builtinModule":"GHC.Conc.IO"},"usedName":{"valueName":{"identifier":"threadWaitRead"}},"qualification":null},{"reference":{"builtinModule":"System.Posix.Types"},"usedName":{"constructorName":{"identifier":"Fd"},"constructorTypeName":{"identifier":"Fd"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Error"},"usedName":{"valueName":{"identifier":"throwErrno"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Types"},"usedName":{"typeName":{"identifier":"CInt"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"typeName":{"identifier":"Ptr"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Types"},"usedName":{"typeName":{"identifier":"CChar"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.Types"},"usedName":{"typeName":{"identifier":"CSize"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null}],"fragment":["receiveloop :: CInt -> Ptr CChar -> CSize -> IO CInt","receiveloop sock buf size\n  = do bytes <- c_recv sock buf size 0\n       if bytes == (-1) then\n         do errno <- getErrno\n            if errno == eAGAIN then\n              do threadWaitRead (Fd sock)\n                 receiveloop sock buf size\n              else throwErrno \"receiveloop\"\n         else return bytes"],"instances":[],"language":{"extensions":["ForeignFunctionInterface","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
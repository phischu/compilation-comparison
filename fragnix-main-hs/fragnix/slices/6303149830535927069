{"sliceID":6303149830535927069,"uses":[{"reference":{"otherSlice":3686524504664350810},"usedName":{"valueName":{"identifier":"headerLines"}},"qualification":null},{"reference":{"otherSlice":8944581311190128798},"usedName":{"valueName":{"identifier":"parseHeaderLines"}},"qualification":null},{"reference":{"otherSlice":355965470513433977},"usedName":{"valueName":{"identifier":"indexRequestHeader"}},"qualification":null},{"reference":{"builtinModule":"GHC.Arr"},"usedName":{"valueName":{"operator":"!"}},"qualification":null},{"reference":{"builtinModule":"GHC.Enum"},"usedName":{"valueName":{"identifier":"fromEnum"}},"qualification":null},{"reference":{"otherSlice":6458824044460865557},"usedName":{"constructorName":{"identifier":"ReqExpect"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":6458824044460865557},"usedName":{"constructorName":{"identifier":"ReqContentLength"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":6458824044460865557},"usedName":{"constructorName":{"identifier":"ReqTransferEncoding"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":8102917075527489400},"usedName":{"valueName":{"identifier":"handleExpect"}},"qualification":null},{"reference":{"otherSlice":135941937043906956},"usedName":{"valueName":{"identifier":"settingsNoParsePath"}},"qualification":null},{"reference":{"otherSlice":7100251321886561720},"usedName":{"valueName":{"identifier":"hashByteString"}},"qualification":null},{"reference":{"otherSlice":3763445562474557767},"usedName":{"valueName":{"identifier":"toInternalInfo"}},"qualification":null},{"reference":{"otherSlice":8144835655087874660},"usedName":{"valueName":{"identifier":"threadHandle"}},"qualification":null},{"reference":{"otherSlice":1023373960850482543},"usedName":{"valueName":{"identifier":"insert"}},"qualification":"Vault"},{"reference":{"otherSlice":3286198326056462912},"usedName":{"valueName":{"identifier":"pauseTimeoutKey"}},"qualification":null},{"reference":{"otherSlice":2025821085572104481},"usedName":{"valueName":{"identifier":"pause"}},"qualification":"Timeout"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":5480165024237640999},"usedName":{"valueName":{"identifier":"getFileInfoKey"}},"qualification":null},{"reference":{"otherSlice":8144835655087874660},"usedName":{"valueName":{"identifier":"getFileInfo"}},"qualification":null},{"reference":{"otherSlice":1411214489630991239},"usedName":{"valueName":{"identifier":"empty"}},"qualification":"Vault"},{"reference":{"otherSlice":319948847747509277},"usedName":{"valueName":{"identifier":"bodyAndSource"}},"qualification":null},{"reference":{"otherSlice":6642977022556726162},"usedName":{"valueName":{"identifier":"timeoutBody"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"constructorName":{"identifier":"Request"},"constructorTypeName":{"identifier":"Request"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestMethod"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"httpVersion"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"pathInfo"}},"qualification":null},{"reference":{"otherSlice":5901584132879337842},"usedName":{"valueName":{"identifier":"decodePathSegments"}},"qualification":"H"},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"rawPathInfo"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"rawQueryString"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"queryString"}},"qualification":null},{"reference":{"otherSlice":9016668032843075385},"usedName":{"valueName":{"identifier":"parseQuery"}},"qualification":"H"},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaders"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"isSecure"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"constructorName":{"identifier":"False"},"constructorTypeName":{"identifier":"Bool"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"remoteHost"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestBody"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"vault"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestBodyLength"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaderHost"}},"qualification":null},{"reference":{"otherSlice":6458824044460865557},"usedName":{"constructorName":{"identifier":"ReqHost"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaderRange"}},"qualification":null},{"reference":{"otherSlice":6458824044460865557},"usedName":{"constructorName":{"identifier":"ReqRange"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaderReferer"}},"qualification":null},{"reference":{"otherSlice":6458824044460865557},"usedName":{"constructorName":{"identifier":"ReqReferer"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"valueName":{"identifier":"requestHeaderUserAgent"}},"qualification":null},{"reference":{"otherSlice":6458824044460865557},"usedName":{"constructorName":{"identifier":"ReqUserAgent"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Bool"}},"qualification":null},{"reference":{"otherSlice":135941937043906956},"usedName":{"typeName":{"identifier":"Settings"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"typeName":{"identifier":"Connection"}},"qualification":null},{"reference":{"otherSlice":1842857625022371370},"usedName":{"typeName":{"identifier":"InternalInfo1"}},"qualification":null},{"reference":{"otherSlice":3812070640366845611},"usedName":{"typeName":{"identifier":"SockAddr"}},"qualification":null},{"reference":{"otherSlice":2950048854801959893},"usedName":{"typeName":{"identifier":"Source"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":9025559142516147699},"usedName":{"typeName":{"identifier":"Request"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"typeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"typeName":{"identifier":"IORef"}},"qualification":"I"},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Int"}},"qualification":null},{"reference":{"otherSlice":7895165942623577320},"usedName":{"typeName":{"identifier":"IndexedHeader"}},"qualification":null},{"reference":{"otherSlice":4010822550476529195},"usedName":{"typeName":{"identifier":"ByteString"}},"qualification":null},{"reference":{"otherSlice":8144835655087874660},"usedName":{"typeName":{"identifier":"InternalInfo"}},"qualification":null}],"fragment":["recvRequest ::\n            Bool ->\n              Settings ->\n                Connection ->\n                  InternalInfo1 ->\n                    SockAddr ->\n                      Source ->\n                        IO\n                          (Request, Maybe (I.IORef Int), IndexedHeader, IO ByteString,\n                           InternalInfo)","recvRequest firstRequest settings conn ii1 addr src\n  = do hdrlines <- headerLines firstRequest src\n       (method, unparsedPath, path, query, httpversion,\n        hdr) <- parseHeaderLines hdrlines\n       let idxhdr = indexRequestHeader hdr\n           expect = idxhdr ! fromEnum ReqExpect\n           cl = idxhdr ! fromEnum ReqContentLength\n           te = idxhdr ! fromEnum ReqTransferEncoding\n           handle100Continue = handleExpect conn httpversion expect\n           rawPath\n             = if settingsNoParsePath settings then unparsedPath else path\n           h = hashByteString rawPath\n           ii = toInternalInfo ii1 h\n           th = threadHandle ii\n           vaultValue\n             = Vault.insert pauseTimeoutKey (Timeout.pause th) $\n                 Vault.insert getFileInfoKey (getFileInfo ii) Vault.empty\n       (rbody, remainingRef, bodyLength) <- bodyAndSource src cl te\n       rbody' <- timeoutBody remainingRef th rbody handle100Continue\n       rbodyFlush <- timeoutBody remainingRef th rbody (return ())\n       let req\n             = Request{requestMethod = method, httpVersion = httpversion,\n                       pathInfo = H.decodePathSegments path, rawPathInfo = rawPath,\n                       rawQueryString = query, queryString = H.parseQuery query,\n                       requestHeaders = hdr, isSecure = False, remoteHost = addr,\n                       requestBody = rbody', vault = vaultValue,\n                       requestBodyLength = bodyLength,\n                       requestHeaderHost = idxhdr ! fromEnum ReqHost,\n                       requestHeaderRange = idxhdr ! fromEnum ReqRange,\n                       requestHeaderReferer = idxhdr ! fromEnum ReqReferer,\n                       requestHeaderUserAgent = idxhdr ! fromEnum ReqUserAgent}\n       return (req, remainingRef, idxhdr, rbodyFlush, ii)"],"instances":[],"language":{"extensions":["BangPatterns","OverloadedStrings","DeriveDataTypeable","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
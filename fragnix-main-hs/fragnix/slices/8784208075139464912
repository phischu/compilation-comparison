{"sliceID":8784208075139464912,"uses":[{"reference":{"otherSlice":135941937043906956},"usedName":{"valueName":{"identifier":"settingsInstallShutdownHandler"}},"qualification":null},{"reference":{"otherSlice":3207236868246623910},"usedName":{"valueName":{"identifier":"runSettingsConnection"}},"qualification":null},{"reference":{"otherSlice":4010172434535953718},"usedName":{"valueName":{"identifier":"accept"}},"qualification":null},{"reference":{"otherSlice":7498864748267634039},"usedName":{"valueName":{"identifier":"setSocketCloseOnExec"}},"qualification":null},{"reference":{"otherSlice":7642706057452917817},"usedName":{"valueName":{"identifier":"setSocketOption"}},"qualification":null},{"reference":{"otherSlice":5653121259726360349},"usedName":{"constructorName":{"identifier":"NoDelay"},"constructorTypeName":{"identifier":"SocketOption"}},"qualification":null},{"reference":{"builtinModule":"Control.Exception.Base"},"usedName":{"valueName":{"identifier":"catch"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Exception"},"usedName":{"constructorName":{"identifier":"SomeException"},"constructorTypeName":{"identifier":"SomeException"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":755250574767203644},"usedName":{"valueName":{"identifier":"socketConnection"}},"qualification":null},{"reference":{"otherSlice":1691131710779787624},"usedName":{"valueName":{"identifier":"close"}},"qualification":null},{"reference":{"otherSlice":135941937043906956},"usedName":{"typeName":{"identifier":"Settings"}},"qualification":null},{"reference":{"otherSlice":1546470151414195006},"usedName":{"typeName":{"identifier":"Socket"}},"qualification":null},{"reference":{"otherSlice":2503338423706628106},"usedName":{"typeName":{"identifier":"Application"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null}],"fragment":["runSettingsSocket :: Settings -> Socket -> Application -> IO ()","runSettingsSocket set socket app\n  = do settingsInstallShutdownHandler set closeListenSocket\n       runSettingsConnection set getConn app\n  where getConn\n          = do (s, sa) <- accept socket\n               setSocketCloseOnExec s\n               setSocketOption s NoDelay 1 `E.catch`\n                 \\ (E.SomeException _) -> return ()\n               conn <- socketConnection s\n               return (conn, sa)\n        closeListenSocket = close socket"],"instances":[],"language":{"extensions":["BangPatterns","OverloadedStrings","PackageImports","PatternGuards","ScopedTypeVariables","TupleSections","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll"],"isInstance":false}}
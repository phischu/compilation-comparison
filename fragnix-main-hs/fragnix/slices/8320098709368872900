{"sliceID":8320098709368872900,"uses":[{"reference":{"otherSlice":980706217060864070},"usedName":{"constructorName":{"identifier":"ReaperSettings"},"constructorTypeName":{"identifier":"ReaperSettings"}},"qualification":null},{"reference":{"otherSlice":980706217060864070},"usedName":{"valueName":{"identifier":"reaperAction"}},"qualification":null},{"reference":{"otherSlice":980706217060864070},"usedName":{"valueName":{"identifier":"reaperCons"}},"qualification":null},{"reference":{"otherSlice":980706217060864070},"usedName":{"valueName":{"identifier":"reaperDelay"}},"qualification":null},{"reference":{"otherSlice":980706217060864070},"usedName":{"valueName":{"identifier":"reaperEmpty"}},"qualification":null},{"reference":{"otherSlice":980706217060864070},"usedName":{"valueName":{"identifier":"reaperNull"}},"qualification":null},{"reference":{"builtinModule":"GHC.Conc.IO"},"usedName":{"valueName":{"identifier":"threadDelay"}},"qualification":null},{"reference":{"builtinModule":"Data.IORef"},"usedName":{"valueName":{"identifier":"atomicModifyIORef'"}},"qualification":null},{"reference":{"builtinModule":"Control.Monad"},"usedName":{"valueName":{"identifier":"join"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":6389988487962542786},"usedName":{"constructorName":{"identifier":"NoReaper"},"constructorTypeName":{"identifier":"State"}},"qualification":null},{"reference":{"builtinModule":"GHC.Err"},"usedName":{"valueName":{"identifier":"error"}},"qualification":null},{"reference":{"otherSlice":6389988487962542786},"usedName":{"constructorName":{"identifier":"Workload"},"constructorTypeName":{"identifier":"State"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"otherwise"}},"qualification":null},{"reference":{"otherSlice":980706217060864070},"usedName":{"typeName":{"identifier":"ReaperSettings"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"typeName":{"identifier":"IORef"}},"qualification":null},{"reference":{"otherSlice":6389988487962542786},"usedName":{"typeName":{"identifier":"State"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null}],"fragment":["reaper ::\n       ReaperSettings workload item -> IORef (State workload) -> IO ()","reaper settings@ReaperSettings{..} stateRef\n  = do threadDelay reaperDelay\n       wl <- atomicModifyIORef' stateRef swapWithEmpty\n       merge <- reaperAction wl\n       join $ atomicModifyIORef' stateRef (check merge)\n  where swapWithEmpty NoReaper\n          = error \"Control.Reaper.reaper: unexpected NoReaper (1)\"\n        swapWithEmpty (Workload wl) = (Workload reaperEmpty, wl)\n        check _ NoReaper\n          = error \"Control.Reaper.reaper: unexpected NoReaper (2)\"\n        check merge (Workload wl)\n          | reaperNull wl' = (NoReaper, return ())\n          | otherwise = (Workload wl', reaper settings stateRef)\n          where wl' = merge wl"],"instances":[],"language":{"extensions":["RecordWildCards","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
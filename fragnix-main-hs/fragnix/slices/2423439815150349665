{"sliceID":2423439815150349665,"uses":[{"reference":{"otherSlice":8642306666063513779},"usedName":{"constructorName":{"identifier":"PS"},"constructorTypeName":{"identifier":"ByteString"}},"qualification":"S"},{"reference":{"builtinModule":"GHC.ForeignPtr"},"usedName":{"valueName":{"identifier":"unsafeForeignPtrToPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"valueName":{"identifier":"plusPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Num"},"usedName":{"valueName":{"operator":"+"}},"qualification":null},{"reference":{"otherSlice":2921932848836490295},"usedName":{"constructorName":{"identifier":"BufRange"},"constructorTypeName":{"identifier":"BufRange"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"<="}},"qualification":null},{"reference":{"builtinModule":"Foreign.Marshal.Utils"},"usedName":{"valueName":{"identifier":"copyBytes"}},"qualification":null},{"reference":{"builtinModule":"GHC.ForeignPtr"},"usedName":{"valueName":{"identifier":"touchForeignPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"otherwise"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":2719835477628140216},"usedName":{"valueName":{"identifier":"bufferFull"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"valueName":{"identifier":"minusPtr"}},"qualification":null},{"reference":{"otherSlice":8642306666063513779},"usedName":{"typeName":{"identifier":"ByteString"}},"qualification":"S"},{"reference":{"otherSlice":2921932848836490295},"usedName":{"typeName":{"identifier":"BufRange"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":3030113937244366044},"usedName":{"typeName":{"identifier":"BuildSignal"}},"qualification":null}],"fragment":["copyByteStringStep ::\n                   S.ByteString ->\n                     (BufRange -> IO (BuildSignal a)) ->\n                       (BufRange -> IO (BuildSignal a))","copyByteStringStep (S.PS ifp ioff isize) !k\n  = goBS (unsafeForeignPtrToPtr ifp `plusPtr` ioff)\n  where !ipe = unsafeForeignPtrToPtr ifp `plusPtr` (ioff + isize)\n        goBS !ip !(BufRange op ope)\n          | inpRemaining <= outRemaining =\n            do copyBytes op ip inpRemaining\n               touchForeignPtr ifp\n               let !br' = BufRange (op `plusPtr` inpRemaining) ope\n               k br'\n          | otherwise =\n            do copyBytes op ip outRemaining\n               let !ip' = ip `plusPtr` outRemaining\n               return $ bufferFull 1 ope (goBS ip')\n          where outRemaining = ope `minusPtr` op\n                inpRemaining = ipe `minusPtr` ip"],"instances":[],"language":{"extensions":["BangPatterns","OverloadedStrings","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
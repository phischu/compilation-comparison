{"sliceID":6872855431506134881,"uses":[{"reference":{"otherSlice":7468473159724944043},"usedName":{"constructorName":{"identifier":"Acquire"},"constructorTypeName":{"identifier":"Acquire"}},"qualification":null},{"reference":{"otherSlice":8434830524291201891},"usedName":{"valueName":{"identifier":"control"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":3341896837186741889},"usedName":{"valueName":{"identifier":"mask"}},"qualification":"E"},{"reference":{"otherSlice":13895810223688184},"usedName":{"constructorName":{"identifier":"Allocated"},"constructorTypeName":{"identifier":"Allocated"}},"qualification":null},{"reference":{"otherSlice":8266417363122549307},"usedName":{"valueName":{"identifier":"onException"}},"qualification":"E"},{"reference":{"otherSlice":6577957584704791200},"usedName":{"constructorName":{"identifier":"ReleaseException"},"constructorTypeName":{"identifier":"ReleaseType"}},"qualification":null},{"reference":{"otherSlice":6577957584704791200},"usedName":{"constructorName":{"identifier":"ReleaseNormal"},"constructorTypeName":{"identifier":"ReleaseType"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":2946060544503603071},"usedName":{"typeName":{"identifier":"MonadBaseControl"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":7468473159724944043},"usedName":{"typeName":{"identifier":"Acquire"}},"qualification":null}],"fragment":["with :: MonadBaseControl IO m => Acquire a -> (a -> m b) -> m b","with (Acquire f) g\n  = control $\n      \\ run ->\n        E.mask $\n          \\ restore ->\n            do Allocated x free <- f restore\n               res <- restore (run (g x)) `E.onException` free ReleaseException\n               free ReleaseNormal\n               return res"],"instances":[],"language":{"extensions":["RankNTypes","MultiParamTypeClasses","DeriveDataTypeable","FlexibleContexts","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
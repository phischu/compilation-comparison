{"sliceID":8850717839016719887,"uses":[{"reference":{"otherSlice":91774999909123259},"usedName":{"typeName":{"identifier":"Buffer"}},"qualification":null},{"reference":{"otherSlice":2439198389408872677},"usedName":{"typeName":{"identifier":"BufSize"}},"qualification":null},{"reference":{"otherSlice":4010822550476529195},"usedName":{"typeName":{"identifier":"ByteString"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Int"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"<"}},"qualification":null},{"reference":{"builtinModule":"GHC.Ptr"},"usedName":{"valueName":{"identifier":"plusPtr"}},"qualification":null},{"reference":{"builtinModule":"Data.Functor"},"usedName":{"valueName":{"identifier":"void"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":6389867443957913839},"usedName":{"valueName":{"identifier":"copy"}},"qualification":null},{"reference":{"builtinModule":"GHC.Num"},"usedName":{"valueName":{"operator":"+"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"otherwise"}},"qualification":null},{"reference":{"otherSlice":3681333600918143498},"usedName":{"valueName":{"identifier":"splitAt"}},"qualification":"BS"},{"reference":{"otherSlice":8946614909990212196},"usedName":{"valueName":{"identifier":"bufferIO"}},"qualification":null},{"reference":{"otherSlice":7235567377809295464},"usedName":{"valueName":{"identifier":"length"}},"qualification":"BS"},{"reference":{"builtinModule":"GHC.Num"},"usedName":{"valueName":{"operator":"-"}},"qualification":null}],"fragment":["packHeader ::\n           Buffer ->\n             BufSize ->\n               (ByteString -> IO ()) -> IO () -> [ByteString] -> Int -> IO Int","packHeader _ _ _ _ [] n = return n\npackHeader buf siz send hook (bs : bss) n\n  | len < room =\n    do let dst = buf `plusPtr` n\n       void $ copy dst bs\n       packHeader buf siz send hook bss (n + len)\n  | otherwise =\n    do let dst = buf `plusPtr` n\n           (bs1, bs2) = BS.splitAt room bs\n       void $ copy dst bs1\n       bufferIO buf siz send\n       hook\n       packHeader buf siz send hook (bs2 : bss) 0\n  where len = BS.length bs\n        room = siz - n"],"instances":[],"language":{"extensions":["ForeignFunctionInterface","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"],"isInstance":false}}
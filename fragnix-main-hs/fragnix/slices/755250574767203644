{"sliceID":755250574767203644,"uses":[{"reference":{"otherSlice":8608175488695596682},"usedName":{"valueName":{"identifier":"newBufferPool"}},"qualification":null},{"reference":{"otherSlice":3796646872631369739},"usedName":{"valueName":{"identifier":"allocateBuffer"}},"qualification":null},{"reference":{"otherSlice":2525088199948183747},"usedName":{"valueName":{"identifier":"bufferSize"}},"qualification":null},{"reference":{"otherSlice":8488102157718894721},"usedName":{"valueName":{"identifier":"sendAll"}},"qualification":"Sock"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"constructorName":{"identifier":"Connection"},"constructorTypeName":{"identifier":"Connection"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connSendMany"}},"qualification":null},{"reference":{"otherSlice":5897783318580220190},"usedName":{"valueName":{"identifier":"sendMany"}},"qualification":"Sock"},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connSendAll"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connSendFile"}},"qualification":null},{"reference":{"otherSlice":6805913896578131096},"usedName":{"valueName":{"identifier":"sendFile"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connClose"}},"qualification":null},{"reference":{"otherSlice":1691131710779787624},"usedName":{"valueName":{"identifier":"close"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connFree"}},"qualification":null},{"reference":{"otherSlice":5182337236225920458},"usedName":{"valueName":{"identifier":"freeBuffer"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connRecv"}},"qualification":null},{"reference":{"otherSlice":4966090846683060504},"usedName":{"valueName":{"identifier":"receive"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connRecvBuf"}},"qualification":null},{"reference":{"otherSlice":2966664413417440160},"usedName":{"valueName":{"identifier":"receiveBuf"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connWriteBuffer"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"valueName":{"identifier":"connBufferSize"}},"qualification":null},{"reference":{"otherSlice":1546470151414195006},"usedName":{"typeName":{"identifier":"Socket"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":3086651893912105973},"usedName":{"typeName":{"identifier":"Connection"}},"qualification":null}],"fragment":["socketConnection :: Socket -> IO Connection","socketConnection s\n  = do bufferPool <- newBufferPool\n       writeBuf <- allocateBuffer bufferSize\n       let sendall = Sock.sendAll s\n       return\n         Connection{connSendMany = Sock.sendMany s, connSendAll = sendall,\n                    connSendFile = sendFile s writeBuf bufferSize sendall,\n                    connClose = close s, connFree = freeBuffer writeBuf,\n                    connRecv = receive s bufferPool, connRecvBuf = receiveBuf s,\n                    connWriteBuffer = writeBuf, connBufferSize = bufferSize}"],"instances":[],"language":{"extensions":["BangPatterns","OverloadedStrings","PackageImports","PatternGuards","ScopedTypeVariables","TupleSections","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll"],"isInstance":false}}